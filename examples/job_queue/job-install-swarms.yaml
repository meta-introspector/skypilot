workdir: .
#~/2024/07/11/skypilot/examples/job_queue/
# /var/task/workdir/
name: setup-swarms-from-source

setup: |
  echo "running setup"

run: |
  timestamp=$(date +%s)
  sudo apt update
  sudo apt install -y git virtualenv
  rm -rf ./src/swarms # oops
  useradd swarms
  if [ ! -d /opt/swarms/ ];
  then
    git clone https://github.com/jmikedupont2/swarms /opt/swarms/
  fi
  
  if [ ! -d /opt/swarms-memory/ ];
  then
    git clone https://github.com/The-Swarm-Corporation/swarms-memory /opt/swarms-memory
  fi
  
  # where the task will run
  mkdir -p /var/task/agent_workspace/
  mkdir -p /home/swarms
  chown -R swarms:swarms /var/task/agent_workspace /home/swarms

 